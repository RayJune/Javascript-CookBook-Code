<!DOCTYPE html>
<head>
<title>typeof, object.valueOf()</title>
<script>
/*
  The valueOf() method returns the primitive value of the specified object.

  You rarely need to invoke the valueOf method yourself; JavaScript automatically 
  invokes it when encountering an object where a primitive value is expected.

  If an object has no primitive value, valueOf returns the object itself.
*/

window.onload = function () {
  // true if variable exists, is a string, and has a length greater than zero
  if (((typeof unknownVariable !== 'undefined') && (typeof unknownVariable.valueOf() === 'string')) && (unknownVariable.length > 0)) {
    console.log('OK 1');
  }

  var unknownVariable;
  if (((typeof unknownVariable !== 'undefined') && (typeof unknownVariable.valueOf() === 'string')) && (unknownVariable.length > 0)) {
    console.log('OK 2');
  }

  unknownVariable = 'test';
  if (((typeof unknownVariable !== 'undefined') && (typeof unknownVariable.valueOf() === 'string')) && (unknownVariable.length > 0)) {
    console.log('OK 3');
  }

  // addition by RayJune
  console.log(typeof NaN);           // number
  console.log(typeof function (){}); // function
};

</script>

</head>
<body>
</body>
